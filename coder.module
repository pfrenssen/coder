<?php
// $Id$

/**
 * @file
 * Installation file for the coder module.
 */

/**
 * Implement hook_menu().
 */
function coder_menu() {
  $items['admin/config/development/coder/configure'] = array(
    'title' => 'Configure',
    'description' => 'Select code review plugins and modules, and upgrade files.',
    'access arguments' => array('administer site configuration'),
    'type' => MENU_LOCAL_TASK,
  );
  $items['admin/config/development/coder'] = array(
    'title' => 'Coder',
    'description' => 'Select code review plugins and modules, and upgrade files.',
    'access arguments' => array('administer site configuration'),
  );
  if (!module_exists('coder_review') && !module_exists('coder_upgrade')) {
    $items['admin/config/development/coder/configure']['page callback'] = 'coder_display_required_module_message';
    $items['admin/config/development/coder']['page callback'] = 'coder_display_required_module_message';
  }
  return $items;
}

function coder_display_required_module_message() {
  $message = t('Please enable the "coder review" or "coder upgrade" module.');
  $build['coder_message']['#markup'] = $message;
  return $build;
}
